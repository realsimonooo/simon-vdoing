---
title:  ç®¡é“
date: 2021-04-24 16:53:27
permalink: /pages/a3c04e/
categories:
  - <æ“ä½œç³»ç»Ÿ>ç¬”è®°
---



> linuxå®éªŒ:four:  **ç®¡é“**

1. é¦–å…ˆåœ¨/optç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªæ–‡ä»¶test.txt,ç„¶åå°†/tmp/file_temp/file1.txt å»ºç«‹ç¡¬é“¾æ¥åˆ°/opt/test.txtï¼›

```
touch test.txt
```

```
ln /opt/test.txt /tmp/file_temp/file1.txt
```
<img src="https://gitee.com/realsimonooo/blog-image/raw/master/uPic/ZNc1jB.png" alt="image-20210422192400877"  />

2. åœ¨/optç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹test_lnï¼Œå°†/tmp/file_temp/file1.txt å»ºç«‹è½¯é“¾æ¥åˆ°/opt/test_lnï¼›

```
cd /opt
mkdir test_ln
```

```
ln -s tmp/file_temp/file1.txt /opt/test_ln
```
<img src="https://gitee.com/realsimonooo/blog-image/raw/master/uPic/PN4xrT.png" alt="image-20210422195022280"  />

3. æµ‹è¯•findå‘½ä»¤çš„å¤šç§ç»„åˆæŸ¥æ‰¾æ–‡ä»¶çš„æ–¹æ³•ï¼›ï¼ˆä»¥ä¸Šæˆªå›¾ï¼‰

  + éå†æŒ‡å®šçš„èµ·å§‹ç›®å½•ï¼š`find / -name passswd`  

  ![image-20210422195900935](https://gitee.com/realsimonooo/blog-image/raw/master/uPic/jUZzHa.png)

  + å°†æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶è¿›è¡Œåˆ é™¤

    ```
    find /root -name testrm -exec rm -f {} /;
    ```

    å°†æ‰¾åˆ°åå­—ä¸º`testrm`çš„æ–‡ä»¶æ‰§è¡Œåˆ é™¤æ“ä½œã€‚

    ![image-20210422200358756](https://gitee.com/realsimonooo/blog-image/raw/master/uPic/akrdmG.png)

  

4. ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå»ºç«‹ä¸€ä¸ªç®¡é“ã€‚çˆ¶è¿›ç¨‹ç”Ÿæˆä¸¤ä¸ªå­è¿›ç¨‹ï¼Œp1å’Œp2ï¼Œä¸¤ä¸ªå­è¿›ç¨‹åˆ†åˆ«å‘ç®¡é“ä¸­å†™å…¥å„è‡ªçš„å­—ç¬¦ä¸²ï¼Œçˆ¶è¿›ç¨‹è¯»å‡ºå®ƒä»¬ã€‚ï¼ˆp1å†™ï¼šchild process P1ï¼Œp2å†™ï¼šchild process P2ï¼‰ï¼ˆæäº¤ä»£ç ï¼‰

   ```c
   #include <stdio.h>
   #include <stdlib.h>
   #include <unistd.h>
   #include <sys/wait.h>
   
   int main()
   {
   	int i, r, p1, p2, fd[2];
   	char buf[50], s[50];
   	pipe(fd);
   	while((p1=fork())==-1);
   	if(p1==0){
   		lockf(fd[1], 1, 0);
   		sprintf(buf, "child process P1 is sending messages! \n");
   		printf("child process P1!\n");
   		write(fd[1], buf, 50);
   		sleep(5);
   		lockf(fd[1], 0, 0);
   		exit(0);
   	} else {
   		while((p2=fork())==-1);
   		if(p2==0){
   			lockf(fd[1], 1, 0);
   			sprintf(buf, "child process P2 is sending messages! \n");			
   			printf("child process P2!\n");
   			write(fd[1], buf, 50);
   			sleep(5);
   			lockf(fd[1], 0, 0);
   			exit(0);
   		}
   	}
   	wait(0);
   	if((r=read(fd[0], s, 50))==-1) 
   		printf("cant read pipe\n");
   	else 
   		printf("%s\n", s);
   	wait(0);
   	if((r=read(fd[0], s, 50))==-1) 
   		printf("cant read pipe\n");
   	else 
   		printf("%s\n", s);
   	exit(0);
   }	
   ```

   



## ğŸ“ƒç›¸å…³çŸ¥è¯†

### ğŸ”—åˆ›å»ºé“¾æ¥å‘½ä»¤`ln`

1. `ln`å¯ä»¥åœ¨æ–‡ä»¶ä¸æ–‡ä»¶æˆ–è€…ç›®å½•ä¹‹é—´åˆ›å»ºé“¾æ¥

   ```
   ln è¢«é“¾æ¥çš„æ–‡ä»¶æˆ–è€…ç›®å½•åç§° é“¾æ¥çš„æ–‡ä»¶æˆ–è€…ç›®å½•åç§°
   ln # æ— å‚æ•°ç¡¬è¿æ¥
   ln -s # è½¯è¿æ¥
   ```

2. **åŒºåˆ«ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥**

   + ç¡¬é“¾æ¥ï¼šé“¾æ¥æ–°å»ºçš„æ–‡ä»¶æ˜¯**å·²ç»å­˜åœ¨çš„æ–‡ä»¶**çš„ä¸€ä¸ªåˆ«åï¼›å½“åŸæ–‡ä»¶åˆ é™¤æ—¶ï¼Œæ–°å»ºçš„æ–‡ä»¶ä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚

     â€‹	ç¡¬è¿æ¥**ä¸å¯ä»¥ç”¨äºç›®å½•ã€ä¸èƒ½è·¨åˆ†åŒºè¿æ¥**ã€‚ï¼ˆå·²ç»å­˜åœ¨çš„æ–‡ä»¶ä¸èƒ½ç¡¬é“¾æ¥ï¼‰

   + è½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰ï¼šä¹Ÿç§°ä¸ºç¬¦å·é“¾æ¥ï¼Œæ–°å»ºçš„æ–‡ä»¶ä»¥â€œè·¯å¾„â€çš„å½¢å¼æ¥è¡¨ç¤ºå¦ä¸€ä¸ªæ–‡ä»¶ï¼›å¯ä»¥æŒ‡å‘ä¸å­˜åœ¨çš„æ–‡ä»¶ã€‚

   + ç¡¬é“¾æ¥çš„æ–‡ä»¶å…±äº«åŒä¸€ä¸ªæ–‡ä»¶æ ‡è¯†å·(`inode`)ï¼›è½¯é“¾æ¥ä¸å…±äº«ï¼Œä½¿ç”¨ç‰¹æ®Šçš„`inode`ï¼›

   + æºæ–‡ä»¶åˆ é™¤åï¼Œè½¯é“¾æ¥ä¸å¯ä»¥è®¿é—®ï¼Œç¡¬é“¾æ¥å¯ä»¥è®¿é—®ï¼›