---
title: 作业
date: 2021-03-10 16:04:52
permalink: /pages/2516b8/
categories:
  - <操作系统>笔记
---
# 操作系统用户界面

+ 对不同用户，操作系统提供的用户界面不同、系统调用不同，命令集不同；

+ 操作系统的操作命令界面称为命令控制界面；

## 作业

<img src="https://cdn.jsdelivr.net/gh/realsimonooo/image-repo@master/blog/JPBMAV.png" alt="image-20210310162812139" style="zoom:50%;" />

+ 从输入到输出结束，用户要求计算机所做的有关业务处理的全部工作称为一次作业；

  + 作业可以由不同顺序的作业步组成。作业步是一次处理过程中相对独立的工作，每次作业步下产生一个输入文件；

    ![image-20210310163222254](https://cdn.jsdelivr.net/gh/realsimonooo/image-repo@master/blog/NUjiiZ.png)

+ 系统的角度，作业是比程序更广的概念；

  作业由程序、数据、作业说明书组成；

  + 一个作业可以包含多个程序和多个数据集，但必须包含一个程序；

  + 作业说明书包括：

    + 作业基本描述
    + 作业控制描述
    + 作业资源要求描述

    系统通过作业说明书控制文件形式的程序和数据，使之执行操作；

    *批处理系统以作业为单位将程序和数据调入**内存**以便执行；

### 作业组织

+ 🌟<mark>**作业的四个状态：**</mark>

  + **提交（由输入设备进入外存）**
  + **后备（建立JCB）**
  + **执行（调入内存）**
  + **完成（正常结束或因错误终止）**

+ **作业控制块（JCB）**：作业说明书在系统中产生的表格，登记该作业要求的资源情况、预计执行时间和执行优先级；

  内容包括：

  + 作业名以及状态；
  + 资源要求；
  + 作业控制方式；

  作用：

  + <mark>**是作业的唯一标识**；</mark>
  + 通过JCB可以对作业进行控制和管理；

  JCB的创建和撤销：

  + 进入**后备**状态后，由作业注册程序**创建**；
  + 当作业**执行**完毕，由作业终止程序**撤销**；

### 作业调度

+ 步骤：
  + 建立JCB；
  + 按照调度算法从后背队列选择作业运行；
  + 为选择的作业分配资源并建立进程；
  + 作业完成后，负责回收资源和该资源的JCB；

+ 算法公式：

  $CPU利用率 = 有效时间/运行时间$

  $作业周转时间Ti = 完成时间-提交时间 = 运行时间Tri+等待时间Tdi$

  $作业平均周转时间=(T1+T2+...+Tn)/n$

  $作业带权周转时间Wi = Ti/Tri = 1 + Tdi/Tri$

  $作业平均带权周转时间W=(W1+W2+...Wn)/n$

+ 常用的作业调度算法：

  + 先来先服务 / $FCFS$

  + 短作业优先 / $SJF$

  + 最高响应比优先 / $HRN$

    $响应比R = (等待时间W+运行时间T)/运行时间T =1+W/T$ 

    

## 一般用户的输入方式

+ 联机输入输出方式

  特点：外围设备直接与主机相连，一台主机可以连接一台或多台外围设备；

+ 脱机输入输出方式

  （预输入方式）特点：解决了联机～时速度太慢的问题；利用个人计算机作为外围处理机进行输入输出处理；

+ 直接耦合方式

  保留了脱机～的快速输入的优点，又没有脱机～的人工干预的缺点；

  <img src="https://cdn.jsdelivr.net/gh/realsimonooo/image-repo@master/blog/zIFiB9.png" alt="image-20210310170202634" style="zoom:50%;" />

+ `spooling`系统

  （外围设备同时联机操作）多台外围设备通过通道或者DMA器件和主机连接起来，作业的输入和输出过程由主机中的操作系统控制。

<img src="https://cdn.jsdelivr.net/gh/realsimonooo/image-repo@master/blog/jwWnKa.png" alt="image-20210310170218036" style="zoom:50%;" />

+ 网络联机方式



## 命令控制界面

命令接口：

+ 联机命令接口：键盘操作命令组成；
+ 脱机命令接口：作业控制命令组成；

程序接口：

+ 由系统调用；



## 系统调用

+ 系统调用提供了应用程序与操作系统之间的接口；
+ 作用：
  + 使**用户级程序**方便获得操作系统提供的服务；
  + 与系统资源有关的服务都由操作系统提供；
+ 分6⃣️类：
  + **进程控制**
  + **文件管理**
  + **设备管理**
  + **存储管理**
  + **通信管理**
  + **线程管理**

#### 系统调用与一般调用的区别

+ 一般调用接口，一种是系统为用户提供的各种命令接口，用户用这些操作命令来组织和控制作业的执行和管理计算机系统。
+ 另一个接口是**系统调用**，编程人员使用系统调用来请求操作系统提供服务。申请和释放外设等类资源、控制程序的执行速度等。

| 系统调用                                                     | 一般调用                             |
| ------------------------------------------------------------ | ------------------------------------ |
| 用户程序-》用户态；操作系统过程->系统态                      | 调用程序和被调用程序都在用户态       |
| 由于调用程序和被调程序在两个状态下，需要访问系统中断进入系统调用； | 通过调用语句直接将控制转移到被调过程 |
| 系统级程序                                                   | 用户级程序                           |

#### 系统调用过程

![image-20210310173456703](https://cdn.jsdelivr.net/gh/realsimonooo/image-repo@master/blog/lxfnfo.png)